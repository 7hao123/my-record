# 主流低代码平台设计思路（架构与工程视角）

> 目标：从“平台级系统设计”的视角，梳理主流低代码平台的核心理念、关键能力与技术架构，便于项目设计与面试表达。

---

## 1. 核心定位与设计原则
- **配置驱动**：页面/流程/数据都抽象为 Schema（JSON/DSL），运行时只消费配置而非手写页面。
- **低门槛高上限**：给业务同学“可视化搭建”，给工程同学“可扩展协议与插件系统”。
- **所见即所得**：编辑态与运行态一致性强，变更可回放、可预览、可发布。
- **工程可治理**：不仅“能做”，更要“可维护、可版本化、可权限化”。

---

## 2. 总体架构分层（主流平台通用分层）
1) **Editor Runtime（编辑器运行时）**
   - 画布交互：拖拽、对齐、吸附、分组、层级、缩放、布局
   - 状态系统：选中态/编辑态/预览态、多端同步
   - 插件入口：自定义面板、快捷操作、右键菜单、辅助线

2) **Renderer Runtime（渲染运行时）**
   - 解析 Schema → 组件树 → 渲染
   - 执行事件、动作与表达式
   - 保持渲染纯粹：不依赖编辑器逻辑

3) **Material/Component Registry（物料注册中心）**
   - 物料元信息：类型、属性面板、默认值、校验器、数据绑定
   - 插件化扩展：新增物料无需改引擎
   - 运行态/编辑态分离配置

4) **Schema & Protocol（协议层）**
   - 页面结构、布局、组件、事件、数据源统一描述
   - 版本化 Schema + 迁移器（升级兼容）

5) **Data & Integration（数据与集成层）**
   - 数据源管理（API / DB / MQ / SaaS）
   - 数据适配与转换（字段映射、数据清洗）
   - 联动机制（过滤、钻取、事件触发）

6) **Governance（治理与平台化层）**
   - 权限、组织、审计、发布、回滚
   - 模板、资产复用、版本管理
   - 多人协作、冲突解决

---

## 3. Schema 设计要点（低代码核心）
- **结构层**：页面/容器/组件层级树
- **表现层**：布局、样式、响应式规则
- **数据层**：数据源、查询参数、转换规则
- **行为层**：事件 → 动作（跳转、联动、更新数据）
- **扩展层**：自定义表达式、自定义动作、自定义组件

**典型 Schema 结构**
- `layout`：布局规则（自由/栅格/流式）
- `components`：组件列表与嵌套结构
- `dataSource`：数据源配置与绑定
- `events`：事件绑定与执行逻辑
- `version`：版本号 + migration

---

## 4. 物料体系设计
- **物料注册机制**：统一 registry（type、render、config、default）
- **属性面板解耦**：业务配置与渲染分离
- **模板/资源复用**：组件组与模板化
- **多形态物料**：图表、表格、表单、流程、容器

---

## 5. 数据绑定与交互模型
- **数据驱动 UI**：数据源 → 适配 → UI
- **事件总线/依赖系统**：组件间联动
- **表达式引擎**：动态计算（如逻辑判断、格式化）
- **过滤与钻取**：维度筛选、层级钻取

---

## 6. 编辑态 / 运行态分离
- **编辑态**：带辅助线、选中框、配置面板
- **运行态**：纯渲染+数据交互
- **好处**：性能可控、体验一致、发布可稳定

---

## 7. 平台化关键能力（主流产品都有）
- **权限体系**：角色/组织/数据权限
- **模板与市场**：沉淀最佳实践
- **版本管理**：回滚、比对、灰度
- **多人协作**：锁定机制、冲突检测
- **监控与审计**：埋点与变更轨迹

---

## 8. 技术选型趋势（主流工程实践）
- **前端**：React/Vue + 编辑器框架 + 动态渲染引擎
- **可视化**：ECharts / AntV / Vega / Visactor
- **交互引擎**：Moveable / Selecto / DnD Kit
- **状态与数据**：Redux / Zustand / React Query
- **协议层**：JSON Schema / 自定义 DSL

---

## 9. 面试表达中的“高层抽象”关键词
- 配置驱动（Schema as Product）
- 插件化物料（Material Registry）
- 编辑/运行时分离（Editor vs Renderer）
- 统一协议 + 版本迁移
- 数据驱动 UI + 事件编排
- 平台治理能力（权限/版本/协作）

---

## 10. 可扩展演进方向
- **AI 低代码**：自然语言生成 Schema / 自动补全配置
- **多端渲染**：Web + 移动端 + 大屏
- **跨系统集成**：SaaS / DataLake / BI
- **低代码 + 规则引擎**：复杂业务流程自动化

---

## 总结（面试收口）
主流低代码平台的核心并非“拖拽 UI”，而是“协议化构建 + 平台化治理”。真正的价值在于：通过 Schema 协议与插件化能力，把页面和业务沉淀为可复用资产，并在工程层面实现可演进、可扩展与可运营。
